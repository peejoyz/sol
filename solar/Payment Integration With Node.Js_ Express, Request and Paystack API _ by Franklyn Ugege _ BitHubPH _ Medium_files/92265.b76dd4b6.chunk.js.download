(self.webpackChunklite=self.webpackChunklite||[]).push([[92265],{4697:(e,n,t)=>{"use strict";t.d(n,{X:()=>U});var i=t(63038),l=t.n(i),o=t(59713),r=t.n(o),a=t(67294),d=t(28655),c=t.n(d),u=t(71439),s=t(90194),m=t(41707),v=t(1072),p=t(42933),k=t(51512),E=t(534);function S(){var e=c()(["\n  fragment NewsletterV3AmpButton_newsletterV3 on NewsletterV3 {\n    id\n    collection {\n      ...collectionDefaultBackgroundTheme_collection\n    }\n  }\n  ","\n"]);return S=function(){return e},e}(0,u.Ps)(S(),E.Gi);var g=function(e){var n=e.newsletterV3,t=e.buttonLayout,i=void 0===t?"MULTI-LINE":t,l=e.buttonSize,o=void 0===l?"LARGE":l,r=e.buttonStyle,d=void 0===r?"STRONG":r,c=e.redirectUrl;return a.createElement(m.Z,null,(function(e){return a.createElement(v.f,{theme:(0,E.jN)(null==n?void 0:n.collection,e)},a.createElement(k.cW,{source:{newsletterV3Id:n.id},extendSource:!0},a.createElement(p.x,{margin:"COMPACT"===i?"10px 20px 10px 0":"",xs:{margin:"10px 0 0 0"}},a.createElement(s.w,{buttonSize:o,buttonStyle:d,onClick:function(){return null},showMailIcon:!1,buttonText:"Learn more",redirectUrl:c}))))}))},f=t(11969),w=t(56202),x=t(53976),N=t(76532),T=t(73891),h=t(82318),C=t(37278),F=t(98024),L=t(95760),R=t(6688),V=t(77180),_=t(27108),b=t(14391),y=t(67297),A=t(80637),P=t(27952),O=function(e,n){var t;return t={borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},r()(t,A.sm(e),{padding:"24px 24px 28px 24px"}),r()(t,"minHeight",n),t},D=function(e){var n=e.isAmp,t=e.viewer,i=e.newsletterV3,l=e.newsletterV3LandingUrl,o=e.useCustomDomainLOFlow,r=e.isVertical,d=e.handleClick;return n?i&&a.createElement(g,{newsletterV3:i,buttonLayout:"COMPACT",redirectUrl:l}):t||o?i&&a.createElement(f.x,{newsletterV3:i,buttonLayout:"COMPACT",helperTextColor:"DARKER",redirectUrl:o?l:void 0}):i&&a.createElement(w.QL,{newsletterV3:i,isVertical:r,handleClick:d})},U=function(e){var n,t,i,o,r,d=e.postId,c=e.publisher,u=e.isVertical,s=void 0!==u&&u,m=a.useRef(null),v=(0,y.v9)((function(e){return e.config.authDomain})),E=(0,y.p9)((function(e){return e.config.isAmp})),S=(0,L.Av)(),g=(0,R.I)(),f=(0,V.F)(),w=(0,N.H)().value,A=!!(0,x.VB)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),U=a.useState(!1),B=l()(U,2),I=B[0],M=B[1],W=a.useState("0px"),Y=l()(W,2),H=Y[0],K=Y[1],G=null==(0,y.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(v)),q=!w&&G&&A,z=c.newsletterV3,X=null==z?void 0:z.type,j=c.username,Q=void 0===j?"":j,Z=(0,P.iBn)(null!==(n=null==z?void 0:z.slug)&&void 0!==n?n:"",v,X===b.Rr.NEWSLETTER_TYPE_COLLECTION?c:void 0,X===b.Rr.NEWSLETTER_TYPE_AUTHOR&&Q?Q:void 0),J="Collection"===c.__typename?c:void 0,$=(0,T.gY)(J).viewerEdge;switch(X){case b.Rr.NEWSLETTER_TYPE_COLLECTION:t="Sign up for ".concat(null==z?void 0:z.name),i="0px",o="You're an editor of ".concat(null==z?void 0:z.name),r=null==$?void 0:$.isEditor;break;case b.Rr.NEWSLETTER_TYPE_AUTHOR:t=(null==z?void 0:z.promoHeadline)||"Get an email whenever ".concat(c.name," publishes."),i="6px",o="You cannot subscribe to yourself",r=c.viewerIsUser}I&&(t="Check your inbox.");var ee=!1,ne=function(){!ee&&te()&&(S.event("newsletterV3.promoViewed",{newsletterV3Id:null==z?void 0:z.id,postId:d}),ee=!0)},te=function(){var e;if(!m.current)return!1;var n=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};return a.useEffect((function(){return ne(),window&&_.V6.on("scroll",ne),function(){_.V6.off("scroll",ne)}}),[]),a.useEffect((function(){var e;if(m.current){var n=(null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect()).height;K("".concat(n,"px"))}}),[m]),z&&a.createElement(k.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},a.createElement("div",{ref:m,className:s?void 0:g(O(f,H))},a.createElement(p.x,{paddingBottom:i},a.createElement(C.X6,{scale:{xs:"S",sm:"S",md:s?"S":"M",lg:s?"S":"M",xl:s?"S":"M"}},t)),X===b.Rr.NEWSLETTER_TYPE_COLLECTION&&!I&&a.createElement(a.Fragment,null,a.createElement(p.x,{paddingTop:"4px"},a.createElement(F.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(c.name))),a.createElement(p.x,{paddingTop:"8px",paddingBottom:"10px"},a.createElement(F.F,{scale:s?"S":{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==z?void 0:z.description,"Â ",!E&&a.createElement(h.r,{inline:!0,linkStyle:"OBVIOUS",href:Z},"Take a look.")))),X===b.Rr.NEWSLETTER_TYPE_AUTHOR&&(null==z?void 0:z.promoBody)&&!I&&a.createElement(a.Fragment,null,a.createElement(p.x,{paddingTop:"8px",paddingBottom:"8px"},a.createElement(F.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==z?void 0:z.promoBody))),r?a.createElement(p.x,{paddingTop:"10px"},a.createElement(F.F,{scale:"M",color:"DARKER"},o)):a.createElement(p.x,{display:"flex",flexWrap:"wrap"},a.createElement(D,{viewer:w,isAmp:E,useCustomDomainLOFlow:q,newsletterV3:z,newsletterV3LandingUrl:Z,isVertical:s,handleClick:function(){return M(!0)}}))))}},28048:(e,n,t)=>{"use strict";t.d(n,{F:()=>l,b:()=>o});var i=t(319),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"showPromo"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"}}]}}]}}].concat(t.n(i)()(l.definitions))}},88703:(e,n,t)=>{"use strict";t.d(n,{g:()=>r,t:()=>a});var i=t(67294),l=t(81474),o=t(32589),r=function(e){var n=e.creator,t=a(n);return n?t:{value:!1}},a=function(e){var n,t,r,a=(0,o.Pd)(e),d=a.viewerEdge,c=a.loading,u=i.useRef(null),s=(0,l.T)({newsletterSlug:null==e||null===(n=e.newsletterV3)||void 0===n?void 0:n.slug,username:null==e?void 0:e.username}),m=s.viewerEdge,v=s.loading;return(r=null!==u.current?{value:u.current}:c||v?{loading:!0}:null!=e&&null!==(t=e.newsletterV3)&&void 0!==t&&t.showPromo?{value:!(!(null!=d&&d.isUser||null==m)&&m.isSubscribed)}:{value:!1}).loading||void 0===r.value||null!==u.current||(u.current=r.value),r}},14894:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UpsellClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/92265.b76dd4b6.chunk.js.map